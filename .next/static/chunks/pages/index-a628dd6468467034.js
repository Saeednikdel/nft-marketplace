(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(53678)}])},53678:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return _}});var r=e(34051),a=e.n(r),i=e(85893),c=e(87357),o=e(86886),s=e(66242),u=e(83965),l=e(44267),d=e(15861),p=e(62023),f=e(83321),m=e(77294),h=e(35553),x=e(67294),v=e(9669),w=e.n(v),k=e(41664),g=e(11163),y=e(31838),j=e(61094),C=e(8693);function I(n,t,e,r,a,i,c){try{var o=n[i](c),s=o.value}catch(u){return void e(u)}o.done?t(s):Promise.resolve(s).then(r,a)}function Z(n){return function(){var t=this,e=arguments;return new Promise((function(r,a){var i=n.apply(t,e);function c(n){I(i,r,a,c,o,"next",n)}function o(n){I(i,r,a,c,o,"throw",n)}c(void 0)}))}}function _(n){var t=n.signer,e=n.provider,r=n.address,v=(0,g.useRouter)(),I=(0,x.useState)([]),_=I[0],b=I[1],N=(0,x.useState)("not-loaded"),S=N[0],E=N[1];function P(){return(P=Z(a().mark((function n(){var t,r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new m.CH(y.AX,C.Mt,e),n.prev=1,n.next=4,t.fetchAllListedItems();case 4:return r=n.sent,console.log("items id & con address",r),n.next=8,Promise.all(r.map(function(){var n=Z(a().mark((function n(t){var r,i,c,o,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new m.CH(t.nftContract,j.Mt,e),n.next=3,r.tokenURI(t.tokenId);case 3:return i=n.sent,n.next=6,w().get(i);case 6:return c=n.sent,o=h.bM(t.price.toString(),"ether"),s={price:o,itemId:t.itemId.toNumber(),tokenId:t.tokenId.toNumber(),seller:t.tokenSeller,owner:t.tokenOwner,image:c.data.image,name:c.data.name,description:c.data.description,nftContract:t.nftContract},n.abrupt("return",s);case 10:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()));case 8:i=n.sent,console.log("items with detail",i),b(i),E("loaded"),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),console.log("error",n.t0);case 17:case"end":return n.stop()}}),n,null,[[1,14]])})))).apply(this,arguments)}function M(){return(M=Z(a().mark((function n(e){var r,i,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new m.CH(y.AX,C.Mt,t),i=h.vz(e.price.toString(),"ether"),n.next=4,r.buyMarketItem(e.nftContract,e.itemId,{value:i});case 4:return c=n.sent,n.next=7,c.wait();case 7:v.push("/myassets");case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function H(){return(H=Z(a().mark((function n(e){var r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new m.CH(y.AX,C.Mt,t),n.next=3,r.cancelListingItemForSale(e.nftContract,e.itemId);case 3:return i=n.sent,n.next=6,i.wait();case 6:v.push("/myassets");case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,x.useEffect)((function(){!function(){P.apply(this,arguments)}()}),[]),"loaded"!==S||_.length?(0,i.jsx)(c.Z,{sx:{width:"100%"},style:{marginTop:30,marginBottom:60},children:(0,i.jsx)(o.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},children:_.map((function(n,t){return(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,i.jsxs)(s.Z,{sx:{maxWidth:345},children:[(0,i.jsx)(k.default,{href:"/item/".concat(n.nftContract,"/").concat(n.tokenId),children:(0,i.jsx)(u.Z,{component:"img",height:"300",image:n.image,alt:n.name})}),(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(d.Z,{gutterBottom:!0,variant:"h5",component:"div",children:n.name}),(0,i.jsx)(d.Z,{variant:"body2",color:"text.secondary",component:"div",children:n.description}),(0,i.jsxs)(d.Z,{variant:"h5",component:"div",children:[n.price," ETH"]})]}),(0,i.jsxs)(p.Z,{children:[n.seller===r?(0,i.jsx)(f.Z,{size:"small",variant:"contained",onClick:function(){return function(n){return H.apply(this,arguments)}(n)},children:"cancel"}):(0,i.jsx)(f.Z,{size:"small",variant:"contained",onClick:function(){return function(n){return M.apply(this,arguments)}(n)},children:"Buy"}),(0,i.jsx)(k.default,{href:"/item/".concat(n.nftContract,"/").concat(n.tokenId),children:(0,i.jsx)(f.Z,{size:"small",children:"view"})})]})]})},t)}))})}):(0,i.jsx)("h1",{className:"px-20 py-10 text-3xl",children:"No items in marketplace"})}}},function(n){n.O(0,[133,294,618,459,401,94,774,888,179],(function(){return t=78581,n(n.s=t);var t}));var t=n.O();_N_E=t}]);